<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Para mi hermana favorita ‚ú®</title>
    <link href="https://fonts.googleapis.com" rel="stylesheet">
    <style>
        body { margin: 0; background: #000; color: white; font-family: 'Quicksand', sans-serif; display: flex; align-items: center; justify-content: center; height: 100vh; overflow: hidden; text-align: center; }
        #ciudad { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to bottom, #ff7e5f, #feb47b, #1a1a2e); z-index: -1; opacity: 0; transition: 3s; }
        .btn-inicio { padding: 25px 50px; font-size: 2rem; background: #ff4d79; border: none; border-radius: 50px; color: white; cursor: pointer; box-shadow: 0 0 30px #ff4d79; font-family: 'Dancing Script', cursive; z-index: 100; }
        .btn-loco { padding: 15px 35px; background: #ff007f; border: 3px solid white; border-radius: 50px; color: white; cursor: pointer; position: absolute; z-index: 999; box-shadow: 0 0 25px #ff007f; font-weight: bold; font-size: 1.5rem; transition: 0.1s; }
        #contenedor { width: 90%; max-width: 700px; z-index: 10; display: none; }
        .texto-nostalgico { font-family: 'Dancing Script', cursive; font-size: 2.3rem; color: #fff; line-height: 1.4; text-shadow: 2px 2px 15px rgba(0,0,0,0.5); }
        .sobre { background: #fff; color: #ff4d79; padding: 40px; border-radius: 10px; box-shadow: 0 0 50px rgba(0,0,0,0.3); cursor: pointer; border: 3px dashed #ff4d79; font-family: 'Dancing Script', cursive; font-size: 2.5rem; }
        #emoji-corriendo { font-size: 6rem; position: absolute; bottom: 10%; left: -200px; z-index: 5; transition: 2.5s linear; }
    </style>
</head>
<body>

    <div id="ciudad"></div>
    <div id="escena">
        <button id="btnPlay" class="btn-inicio">Hola loka, yo soy muy pro checa esto... ‚ú®</button>
    </div>
    <div id="contenedor"></div>
    <div id="emoji-corriendo">üèÉ‚Äç‚ôÇÔ∏èüí®</div>

    <script>
        const escena = document.getElementById('escena');
        const ciudad = document.getElementById('ciudad');
        const cont = document.getElementById('contenedor');
        const emoji = document.getElementById('emoji-corriendo');
        let clics = 0;

        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function sonar(freq, tipo, duracion, vol = 0.2) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = tipo; osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            gain.gain.setValueAtTime(vol, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + duracion);
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + duracion);
        }

        function risas() {
            for(let i=0; i<15; i++) setTimeout(() => sonar(150 + Math.random()*400, 'sawtooth', 0.2, 0.1), i*80);
        }

        document.getElementById('btnPlay').addEventListener('click', function() {
            this.remove();
            const b = document.createElement('button');
            b.className = 'btn-loco'; b.innerText = 'TOCA AQU√ç';
            document.body.appendChild(b);
            b.style.top = "50%"; b.style.left = "50%"; b.style.transform = "translate(-50%, -50%)";

            b.addEventListener('click', () => {
                clics++; sonar(300 + (clics * 100), 'sine', 0.2);
                if (clics < 8) {
                    b.style.top = (Math.random()*60 + 20) + "%";
                    b.style.left = (Math.random()*60 + 20) + "%";
                } else {
                    b.remove();
                    faseManca();
                }
            });
        });

        function faseManca() {
            document.body.style.background = "#ffff00";
            risas();
            escena.innerHTML = "<h1 style='font-size:5rem; color:black;'>¬°MANCAAA! üòÇü§°</h1>";
            setTimeout(faseCarta, 3000);
        }

        function faseCarta() {
            document.body.style.background = "#1a1a2e";
            escena.innerHTML = "<div class='sobre' onclick='abrirCarta()'>Toca para abrir tu carta... üíå</div>";
        }

        function abrirCarta() {
            escena.style.display = 'none';
            ciudad.style.opacity = 1;
            cont.style.display = 'block';
            sonar(523, 'sine', 2, 0.1);
            
            const texto = "manca pa to pero... ¬øque fue dani? gracias x estos 15 a√±os kike cuidadome üëÄ pero siempre haz estado cuando te necesito y aconsejarme y dandome apoyo. Eres la mejor hermana de 24 a√±os (aunque te enojes por todo jaja)...";
            
            cont.innerHTML = `<div id='maquina' class='texto-nostalgico'></div>`;
            let i = 0;
            const t = setInterval(() => {
                document.getElementById('maquina').innerHTML += texto.charAt(i);
                i++;
                if(i >= texto.length) {
                    clearInterval(t);
                    setTimeout(faseArhanza, 5000);
                }
            }, 70);
        }

        function faseArhanza() {
            ciudad.style.opacity = 0;
            document.body.style.background = "#000";
            cont.innerHTML = "<h1 class='texto-nostalgico'>¬øSera que esto le guste a Arhanza? üòç</h1>";
            setTimeout(() => {
                emoji.style.left = "120vw";
                setTimeout(() => {
                    sonar(80, 'square', 0.5);
                    cont.innerHTML += "<h2 style='color:orange'>¬°PUM! *Se cae y come migajas* ü§°üí®</h2>";
                    risas();
                    setTimeout(finalPC, 4000);
                }, 1300);
            }, 1000);
        }

        function finalPC() {
            document.body.style.background = "linear-gradient(to right, #00c6ff, #0072ff)";
            cont.innerHTML = "<h1 class='texto-nostalgico' style='font-size:3.5rem'>Ah gracias x la pc que sin ella no hubiera hecho esto byeee! üíª‚úåÔ∏è</h1>";
            sonar(880, 'sine', 1, 0.2);
        }
    </script>
</body>
</html>
